(this["webpackJsonpcard-filter-app"]=this["webpackJsonpcard-filter-app"]||[]).push([[0],{15:function(e,a,t){},16:function(e,a,t){},17:function(e,a,t){"use strict";t.r(a);var l=t(0),c=t.n(l),r=t(5),n=t.n(r),s=(t(15),t(1)),o=t(3),m=t.n(o);t(16);var i=()=>{const[e,a]=Object(l.useState)(null),[t,r]=Object(l.useState)([]),[n,o]=Object(l.useState)(new Set),[i,d]=Object(l.useState)(!1),[u,p]=Object(l.useState)(""),[b,h]=Object(l.useState)(!0),[E,g]=Object(l.useState)(1),[f,N]=Object(l.useState)(25),[C,v]=Object(l.useState)(null),[k,y]=Object(l.useState)("asc"),[x,w]=Object(l.useState)(""),[S,T]=Object(l.useState)("file"),[j,L]=Object(l.useState)(""),[F,O]=Object(l.useState)({codes:"",series:"",numberFrom:"",numberTo:"",wishlistsFrom:"",wishlistsTo:"",editions:[],morphed:!1,trimmed:!1,frame:!1,hasDyeName:!1,tag:"",noneTag:!1,blacklistSeries:"",blacklistCharacter:"",blacklistTag:"",excludeFrame:!1,excludeMorphed:!1,excludeTrimmed:!1,excludeDyeName:!1}),[R,I]=Object(l.useState)([]),[M,U]=Object(l.useState)(!1),[D,z]=Object(l.useState)("50per"),[P,A]=Object(l.useState)(null),B=Object(l.useMemo)(()=>{if(!t.length)return[];let e=t;if(F.codes.trim()){const e=F.codes.toLowerCase().split(",").map(e=>e.trim()).filter(e=>e.length>0),a=new Map;t.forEach(e=>{const t=e.code.toLowerCase();a.has(t)||a.set(t,[]),a.get(t).push(e)});const l=[],c=[],r=[];return e.forEach(e=>{a.has(e)?(l.push(...a.get(e)),c.push(e)):r.push(e)}),l}return e.filter(e=>{if(F.excludeMorphed&&"Yes"===e.morphed)return!1;if(F.excludeTrimmed&&"Yes"===e.trimmed)return!1;if(F.excludeFrame&&e.frame&&""!==e.frame.trim())return!1;if(F.excludeDyeName&&e["dye.name"]&&""!==e["dye.name"].trim())return!1;if(F.blacklistSeries&&F.blacklistSeries.split(",").some(a=>e.series.toLowerCase().includes(a.trim().toLowerCase())))return!1;if(F.blacklistCharacter&&F.blacklistCharacter.split(",").some(a=>e.character.toLowerCase().includes(a.trim().toLowerCase())))return!1;if(F.blacklistTag&&F.blacklistTag.split(",").some(a=>(e.tag||"").toLowerCase().includes(a.trim().toLowerCase())))return!1;if(F.series){if(!F.series.toLowerCase().split(",").map(e=>e.trim()).some(a=>e.series.toLowerCase().includes(a)))return!1}if(F.numberFrom&&parseInt(e.number)<parseInt(F.numberFrom))return!1;if(F.numberTo&&parseInt(e.number)>parseInt(F.numberTo))return!1;if(F.wishlistsFrom&&parseInt(e.wishlists)<parseInt(F.wishlistsFrom))return!1;if(F.wishlistsTo&&parseInt(e.wishlists)>parseInt(F.wishlistsTo))return!1;if(F.editions.length>0&&!F.editions.includes(e.edition))return!1;if(F.morphed&&"Yes"!==e.morphed)return!1;if(F.trimmed&&"Yes"!==e.trimmed)return!1;if(F.frame&&(!e.frame||""===e.frame))return!1;if(F.hasDyeName&&(!e["dye.name"]||""===e["dye.name"]))return!1;if(F.noneTag){if(e.tag&&""!==e.tag.trim())return!1}else if(F.tag&&!e.tag.toLowerCase().includes(F.tag.toLowerCase()))return!1;return!0})},[t,F]);Object(l.useEffect)(()=>{if(F.codes.trim()){const e=F.codes.toLowerCase().split(",").map(e=>e.trim()).filter(e=>e.length>0),a=new Set(t.map(e=>e.code.toLowerCase())),l=e.filter(e=>!a.has(e));I(l)}else I([])},[F.codes,t]);const V=Object(l.useMemo)(()=>0===n.size?B:B.filter(e=>!n.has(e.code)),[B,n]),_=Object(l.useMemo)(()=>{if(!C)return V;const e=[...V];return e.sort((e,a)=>{if(["number","wishlists","edition","worker.effort"].includes(C)){const t=parseInt(e[C])||0,l=parseInt(a[C])||0;return"asc"===k?t-l:l-t}const t=e[C]||"",l=a[C]||"";return"asc"===k?t.localeCompare(l):l.localeCompare(t)}),e},[V,C,k]),Y=Math.ceil(_.length/f)||1,H=Object(l.useMemo)(()=>{const e=(E-1)*f;return _.slice(e,e+f)},[_,E,f]),W=Object(l.useCallback)(e=>{C===e?y(e=>"asc"===e?"desc":(v(null),"asc")):(v(e),y("asc"))},[C]),q=e=>{const{name:a,value:t,type:l,checked:c}=e.target;O(e=>Object(s.a)(Object(s.a)({},e),{},{[a]:"checkbox"===l?c:t})),g(1)},J=()=>{if("50per"===D){let e="";for(let a=0;a<B.length;a+=50){const t=B.slice(a,a+50).map(e=>e.code).join(", ");e+=u.trim()?"".concat(u," ").concat(t,"\n"):"".concat(t,"\n")}return e}return B.map(e=>u.trim()?"".concat(u," ").concat(e.code):e.code).join("\n")},Q=Object(l.useMemo)(()=>{const e=new Set(t.map(e=>e.edition));return Array.from(e).sort((e,a)=>parseInt(e)-parseInt(a))},[t]);return Object(l.useEffect)(()=>{document.body.className=b?"dark-theme":""},[b]),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"theme-switch-container"},c.a.createElement("span",{className:"theme-icon"},"\u2600\ufe0f"),c.a.createElement("label",{className:"theme-switch"},c.a.createElement("input",{type:"checkbox",checked:b,onChange:()=>h(!b)}),c.a.createElement("span",{className:"slider"})),c.a.createElement("span",{className:"theme-icon"},"\ud83c\udf19")),c.a.createElement("h1",{className:"header"},"Card Filter App (Optimized)"),c.a.createElement("div",{className:"card"},c.a.createElement("h2",null,"Load CSV Data"),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Choose input method:"),c.a.createElement("div",{className:"flex gap-4"},c.a.createElement("div",{className:"checkbox-container"},c.a.createElement("input",{type:"radio",id:"file-method",checked:"file"===S,onChange:()=>{T("file"),L("")},className:"checkbox"}),c.a.createElement("label",{htmlFor:"file-method",className:"checkbox-label"},"Upload File")),c.a.createElement("div",{className:"checkbox-container"},c.a.createElement("input",{type:"radio",id:"url-method",checked:"url"===S,onChange:()=>{T("url"),a(null)},className:"checkbox"}),c.a.createElement("label",{htmlFor:"url-method",className:"checkbox-label"},"Load from URL")))),"file"===S&&c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Select CSV or TXT file:"),c.a.createElement("input",{type:"file",accept:".csv, .txt",onChange:async e=>{const t=e.target.files[0];a(t),t&&(d(!0),m.a.parse(t,{header:!0,skipEmptyLines:!0,complete:e=>{r(e.data),o(new Set),d(!1)},error:e=>{console.error(e),d(!1)}}))},className:"form-input"})),"url"===S&&c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"CSV file URL:"),c.a.createElement("div",{className:"flex gap-2"},c.a.createElement("input",{type:"url",value:x,onChange:e=>w(e.target.value),className:"form-input",placeholder:"https://...",style:{flex:1}}),c.a.createElement("button",{onClick:async()=>{if(x.trim())if(x.toLowerCase().endsWith(".csv")){d(!0),L(""),a(null);try{const e="https://api.codetabs.com/v1/proxy?quest=".concat(encodeURIComponent(x)),a=await fetch(e);if(!a.ok)throw new Error("HTTP error! status: ".concat(a.status));const t=await a.text();m.a.parse(t,{header:!0,skipEmptyLines:!0,complete:e=>{if(!e.data||0===e.data.length)return L("No data found"),void d(!1);r(e.data),o(new Set),d(!1)},error:()=>{L("Error parsing CSV"),d(!1)}})}catch(e){L("Error: ".concat(e.message)),d(!1)}}else L("URL must point to a .csv file");else L("Please enter a URL")},disabled:i,className:"btn btn-primary"},i?"Loading...":"Load CSV")),j&&c.a.createElement("div",{className:"url-error"},c.a.createElement("p",{className:"text-error"},j))),i&&c.a.createElement("p",null,"Loading data..."),!i&&t.length>0&&c.a.createElement("p",{className:"text-success"},"Loaded ",t.length," records."),c.a.createElement("div",{className:"form-group mt-4"},c.a.createElement("label",{className:"form-label"},"Prefix for card codes:"),c.a.createElement("input",{type:"text",value:u,onChange:e=>p(e.target.value),className:"form-input",placeholder:"e.g. kt t1"}))),c.a.createElement("div",{className:"card"},c.a.createElement("h2",null,"Filters"),c.a.createElement("div",{className:"filter-section"},c.a.createElement("h3",{className:"filter-section-title"},"Include Filters"),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Search by Card Codes:"),c.a.createElement("input",{type:"text",name:"codes",value:F.codes,onChange:q,className:"form-input",placeholder:"Enter codes separated by commas..."}),R.length>0&&c.a.createElement("div",{className:"not-found-codes"},c.a.createElement("p",{className:"text-warning"},c.a.createElement("strong",null,"Not found:")," ",R.join(", ")))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Series:"),c.a.createElement("input",{type:"text",name:"series",value:F.series,onChange:q,className:"form-input",disabled:!!F.codes,placeholder:"Comma-separated series..."})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Number:"),c.a.createElement("div",{className:"flex gap-2"},c.a.createElement("input",{type:"number",name:"numberFrom",value:F.numberFrom,onChange:q,className:"form-input",placeholder:"From",disabled:!!F.codes}),c.a.createElement("input",{type:"number",name:"numberTo",value:F.numberTo,onChange:q,className:"form-input",placeholder:"To",disabled:!!F.codes}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Wishlists:"),c.a.createElement("div",{className:"flex gap-2"},c.a.createElement("input",{type:"number",name:"wishlistsFrom",value:F.wishlistsFrom,onChange:q,className:"form-input",placeholder:"From",disabled:!!F.codes}),c.a.createElement("input",{type:"number",name:"wishlistsTo",value:F.wishlistsTo,onChange:q,className:"form-input",placeholder:"To",disabled:!!F.codes}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Tag:"),c.a.createElement("div",{className:"flex gap-2"},c.a.createElement("input",{type:"text",name:"tag",value:F.tag,onChange:q,className:"form-input",placeholder:"Tag...",disabled:F.noneTag||!!F.codes}),c.a.createElement("button",{onClick:()=>O(e=>Object(s.a)(Object(s.a)({},e),{},{noneTag:!e.noneTag})),className:"btn ".concat(F.noneTag?"btn-primary":"btn-secondary"),disabled:!!F.codes},"None Tag"))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Editions:"),c.a.createElement("div",{className:"flex flex-wrap gap-2"},Q.map(e=>c.a.createElement("button",{key:e,onClick:()=>{return!F.codes&&(a=e,O(e=>{const t=e.editions.includes(a)?e.editions.filter(e=>e!==a):[...e.editions,a];return Object(s.a)(Object(s.a)({},e),{},{editions:t})}),void g(1));var a},className:"chip ".concat(F.editions.includes(e)?"chip-blue":"chip-gray"," ").concat(F.codes?"opacity-50":""),disabled:!!F.codes},e)))),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"flex flex-wrap gap-2"},["morphed","trimmed","frame","hasDyeName"].map(e=>c.a.createElement("div",{key:e,className:"checkbox-container"},c.a.createElement("input",{type:"checkbox",id:e,name:e,checked:F[e],onChange:q,className:"checkbox",disabled:!!F.codes}),c.a.createElement("label",{htmlFor:e,className:"checkbox-label"},e))))),c.a.createElement("div",{className:"flex gap-2 mt-4"},c.a.createElement("button",{onClick:()=>{g(1),o(new Set)},className:"btn btn-primary"},"Apply Filters / Reset Hidden"),c.a.createElement("button",{onClick:()=>{O({codes:"",series:"",numberFrom:"",numberTo:"",wishlistsFrom:"",wishlistsTo:"",editions:[],morphed:!1,trimmed:!1,frame:!1,hasDyeName:!1,tag:"",noneTag:!1,blacklistSeries:"",blacklistCharacter:"",blacklistTag:"",excludeFrame:!1,excludeMorphed:!1,excludeTrimmed:!1,excludeDyeName:!1}),v(null),o(new Set),g(1)},className:"btn btn-secondary"},"Reset Filters"))),c.a.createElement("div",{className:"filter-section-divider"}),c.a.createElement("div",{className:"filter-section"},c.a.createElement("h3",{className:"filter-section-title"},"Exclude Filters (Blacklist)"),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Exclude Series:"),c.a.createElement("input",{type:"text",name:"blacklistSeries",value:F.blacklistSeries,onChange:q,className:"form-input"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Exclude Characters:"),c.a.createElement("input",{type:"text",name:"blacklistCharacter",value:F.blacklistCharacter,onChange:q,className:"form-input"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"form-label"},"Exclude Tags:"),c.a.createElement("input",{type:"text",name:"blacklistTag",value:F.blacklistTag,onChange:q,className:"form-input"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"flex flex-wrap gap-2"},c.a.createElement("div",{className:"checkbox-container"},c.a.createElement("input",{type:"checkbox",id:"excludeFrame",name:"excludeFrame",checked:F.excludeFrame,onChange:q,className:"checkbox"}),c.a.createElement("label",{htmlFor:"excludeFrame",className:"checkbox-label"},"Exclude Frame")))))),c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"results-header"},c.a.createElement("h2",null,"Results ",t.length>0?"(".concat(V.length,"/").concat(B.length,")"):""),c.a.createElement("div",{className:"results-actions"},c.a.createElement("button",{onClick:()=>{if(0===V.length)return void(n.size>0&&(o(new Set),alert("Restored all hidden cards!")));const e=V.slice(0,50),a=e.map(e=>u.trim()?"".concat(u," ").concat(e.code):e.code).join(", ");navigator.clipboard.writeText(a),alert("Copied ".concat(e.length," codes")),o(a=>{const t=new Set(a);return e.forEach(e=>t.add(e.code)),t})},disabled:0===B.length,className:"btn ".concat(0===B.length?"btn-secondary":"btn-success")},0===V.length&&B.length>0?"Restore All":"Copy 50"),c.a.createElement("button",{onClick:()=>{if(0===V.length)return void(n.size>0&&(o(new Set),alert("Restored all hidden cards!")));const e=V[0],a=u.trim()?"".concat(u," ").concat(e.code):e.code;navigator.clipboard.writeText(a),o(a=>{const t=new Set(a);return t.add(e.code),t})},disabled:0===B.length,className:"btn ".concat(0===B.length?"btn-secondary":"btn-success")},"Copy 1"),c.a.createElement("button",{onClick:()=>{let e="";for(let c=0;c<B.length;c+=50){const a=B.slice(c,c+50).map(e=>e.code).join(", ");e+=u.trim()?"".concat(u," ").concat(a,"\n"):"".concat(a,"\n")}const a=new Blob([e],{type:"text/plain"}),t=URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download="card_codes.txt",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t)},disabled:0===B.length,className:"btn btn-purple"},"DL 50"),c.a.createElement("button",{onClick:()=>{const e=B.map(e=>u.trim()?"".concat(u," ").concat(e.code):e.code).join("\n"),a=new Blob([e],{type:"text/plain"}),t=URL.createObjectURL(a),l=document.createElement("a");l.href=t,l.download="card_codes_one_per_line.txt",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(t)},disabled:0===B.length,className:"btn btn-purple"},"DL 1"),c.a.createElement("button",{onClick:()=>U(!0),disabled:0===B.length,className:"btn btn-info"},"Show Codes"))),V.length>0?c.a.createElement("div",{className:"table-container"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Image"),c.a.createElement("th",{onClick:()=>W("code"),className:"sortable-header"},"Code ","code"===C&&("asc"===k?"\u25b2":"\u25bc")),c.a.createElement("th",{onClick:()=>W("number"),className:"sortable-header"},"Num ","number"===C&&("asc"===k?"\u25b2":"\u25bc")),c.a.createElement("th",{onClick:()=>W("edition"),className:"sortable-header"},"Ed ","edition"===C&&("asc"===k?"\u25b2":"\u25bc")),c.a.createElement("th",{onClick:()=>W("character"),className:"sortable-header"},"Character"),c.a.createElement("th",{onClick:()=>W("series"),className:"sortable-header"},"Series"),c.a.createElement("th",null,"Quality"),c.a.createElement("th",{onClick:()=>W("wishlists"),className:"sortable-header"},"WL"),c.a.createElement("th",null,"Tag"))),c.a.createElement("tbody",null,H.map(e=>{const{primary:a,fallback:t}=((e,a,t)=>{const l=e=>String(e||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/['\u2019]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),c=l(e),r=l(a),n=String(t).toLowerCase();return{primary:"https://d2l56h9h5tj8ue.cloudfront.net/images/cards/".concat(c,"-").concat(r,"-").concat(n,".jpg"),fallback:"https://d2l56h9h5tj8ue.cloudfront.net/images/cards/".concat(c,"-").concat(n,".jpg")}})(e.character,e.series,e.edition);return c.a.createElement("tr",{key:e.code},c.a.createElement("td",null,c.a.createElement("img",{src:a,alt:"",className:"card-thumb zoomable",loading:"lazy",width:"56",height:"80",onError:e=>{e.currentTarget.dataset.triedFallback?(e.currentTarget.onerror=null,e.currentTarget.src="https://via.placeholder.com/56x80?text=No+Img"):(e.currentTarget.dataset.triedFallback="true",e.currentTarget.src=t)},onClick:()=>A(a)})),c.a.createElement("td",{className:"code-cell"},e.code),c.a.createElement("td",null,e.number),c.a.createElement("td",null,e.edition),c.a.createElement("td",null,e.character),c.a.createElement("td",null,e.series),c.a.createElement("td",null,e.quality),c.a.createElement("td",null,e.wishlists),c.a.createElement("td",null,e.tag))})))):c.a.createElement("p",{className:"no-results"},e?"No results (or all copied).":"No data loaded."),V.length>0&&c.a.createElement("div",{className:"pagination-container"},c.a.createElement("button",{onClick:()=>g(1),disabled:1===E,className:"btn"},"\xab"),c.a.createElement("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:1===E,className:"btn"},"\u2039"),c.a.createElement("div",{className:"page-info"},c.a.createElement("span",null,"Page"),c.a.createElement("input",{type:"number",min:"1",max:Y,value:E,onChange:e=>g(Number(e.target.value)),className:"page-input form-input"}),c.a.createElement("span",null,"of ",Y)),c.a.createElement("button",{onClick:()=>g(e=>Math.min(Y,e+1)),disabled:E===Y,className:"btn"},"\u203a"),c.a.createElement("button",{onClick:()=>g(Y),disabled:E===Y,className:"btn"},"\xbb"),c.a.createElement("div",{className:"items-per-page"},c.a.createElement("span",null,"Show"),c.a.createElement("select",{value:f,onChange:e=>{N(Number(e.target.value)),g(1)},className:"items-select form-input"},c.a.createElement("option",{value:"10"},"10"),c.a.createElement("option",{value:"25"},"25"),c.a.createElement("option",{value:"50"},"50"),c.a.createElement("option",{value:"100"},"100 (High RAM)"))))),M&&c.a.createElement("div",{className:"modal-overlay",onClick:()=>U(!1)},c.a.createElement("div",{className:"modal-content",onClick:e=>e.stopPropagation()},c.a.createElement("div",{className:"modal-header"},c.a.createElement("h3",null,"Codes"),c.a.createElement("button",{className:"modal-close",onClick:()=>U(!1)},"\xd7")),c.a.createElement("div",{className:"modal-controls"},c.a.createElement("div",{className:"modal-format-toggle"},c.a.createElement("button",{onClick:()=>z("50per"),className:"btn ".concat("50per"===D?"btn-primary":"btn-secondary")},"50/line"),c.a.createElement("button",{onClick:()=>z("1per"),className:"btn ".concat("1per"===D?"btn-primary":"btn-secondary")},"1/line")),c.a.createElement("button",{onClick:()=>{navigator.clipboard.writeText(J()),alert("Copied!")},className:"btn btn-success"},"Copy All")),c.a.createElement("div",{className:"modal-body"},c.a.createElement("textarea",{className:"codes-textarea",value:J(),readOnly:!0,rows:15})))),P&&c.a.createElement("div",{className:"image-modal-overlay",onClick:()=>A(null)},c.a.createElement("div",{className:"image-modal-content",onClick:e=>e.stopPropagation()},c.a.createElement("img",{src:P,alt:"Full",className:"image-modal-full"}),c.a.createElement("button",{className:"image-modal-close",onClick:()=>A(null)},"\xd7"))))};var d=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,18)).then(a=>{let{getCLS:t,getFID:l,getFCP:c,getLCP:r,getTTFB:n}=a;t(e),l(e),c(e),r(e),n(e)})};n.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i,null))),d()},6:function(e,a,t){e.exports=t(17)}},[[6,1,2]]]);
//# sourceMappingURL=main.f4fc2fcd.chunk.js.map